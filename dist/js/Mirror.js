jQuery.fn.extend({mirror:function(i){function t(i){for(var t in i)this[t]=i[t];this.smallBoxId=i.smallBoxId,this.smallImgId=i.smallImgId,this.imgPath=i.imgPath,this.baseLeft=i.baseLeft,this.baseTop=i.baseTop,this.baseWidth=i.baseWidth,this.baseHeight=i.baseHeight,this.mirrorWidth=i.mirrorWidth,this.mirrorHeight=i.mirrorHeight,this.multiple=i.multiple,this.position=i.position,this.hasBig=!1,this.mirrorDom=null,this.bigBoxDom=null,this.bigImgDom=null,this.initUI()}t.prototype={initUI:function(){var i=this;$(this.smallBoxId).mouseover(function(t){var s=t||window.event;console.log("over"),i.hasBig||(console.log("createBig()"),i.createBig(s),i.hasBig=!0)}),$(this.smallBoxId).mousemove(function(t){var s,e,o=t||window.event;o.target!=$(i.smallBoxId)?(s=parseFloat(o.target.style.left)+o.offsetX-i.baseLeft-i.mirrorWidth/2,e=parseFloat(o.target.style.top)+o.offsetY-i.baseTop-i.mirrorHeight/2):(s=o.offsetX-i.baseLeft-i.mirrorWidth/2,e=o.offsetY-i.baseTop-i.mirrorHeight/2),i.overSize(s,e)}),$(this.smallBoxId).mouseout(function(){})},removeBig:function(){$(this.smallBoxId).remove(this.mirrorDom),this.bigBoxDom.removeChild(this.bigImgDom),$(this.smallBoxId).remove(this.bigBoxDom),this.hasBig=!1},createBig:function(i){this.mirrorDom=document.createElement("div");var t=i.offsetX-this.baseLeft-this.mirrorWidth/2,s=i.offsetY-this.baseTop-this.mirrorHeight/2;this.mirrorDom.style.cssText="position:absolute;left:"+t+"px;top:"+s+"px;width:"+this.mirrorWidth+"px;height:"+this.mirrorHeight+"px;border:1px solid black;";var e=this;this.mirrorDom.onmouseout=function(i){var t=i||window.event;console.log("out"),e.hasBig&&(console.log("remove"),e.removeBig()),t.stopPropagation()},$(this.smallBoxId).append(this.mirrorDom),this.bigBoxDom=document.createElement("div");var o,h,r=this.mirrorWidth*this.multiple,m=this.mirrorHeight*this.multiple;switch(this.position){case"上":o=0,h=-1*m;break;case"右":o=this.baseWidth,h=0;break;case"下":o=0,h=this.baseHeight;break;case"左":o=-1*r,h=0}this.bigBoxDom.style.cssText="position:absolute;left:"+o+"px;top:"+h+"px;width:"+r+"px;height:"+m+"px;overflow:hidden;",$(this.smallBoxId).append(this.bigBoxDom),this.bigImgDom=document.createElement("img"),this.bigImgDom.src=this.imgPath;var l=this.baseWidth*this.multiple,a=this.baseHeight*this.multiple;this.bigImgDom.style.cssText="position:absolute;width:"+l+"px;height:"+a+"px;",this.bigBoxDom.appendChild(this.bigImgDom),this.overSize(t,s)},overSize:function(i,t){i<=-1?i=-1:i>=this.baseWidth-this.mirrorWidth-1&&(i=this.baseWidth-this.mirrorWidth-1),t<=-1?t=-1:t>=this.baseHeight-this.mirrorHeight-1&&(t=this.baseHeight-this.mirrorHeight-1),this.mirrorDom.style.left=i+"px",this.mirrorDom.style.top=t+"px",this.bigImgDom.style.left=-1*this.multiple*i+"px",this.bigImgDom.style.top=-1*this.multiple*t+"px"}};new t(i)}});