require(["jquery"],function(i){i.fn.extend({mirror:function(i){function t(i){for(var t in i)this[t]=i[t];this.hasBig=!1,this.mirrorDom=null,this.bigBoxDom=null,this.bigImgDom=null,this.initUI()}t.prototype={initUI:function(){var i=this;$(this.smallBoxId).mouseover(function(t){var o=t||window.event;i.hasBig||(console.log("createBig()"),i.createBig(o),i.hasBig=!0)}),$(this.smallBoxId).mousemove(function(t){var o,e,s=t||window.event;s.target!=$(i.smallBoxId)?(o=parseFloat(s.target.style.left)+s.offsetX-i.baseLeft-i.mirrorWidth/2,e=parseFloat(s.target.style.top)+s.offsetY-i.baseTop-i.mirrorHeight/2):(o=s.offsetX-i.baseLeft-i.mirrorWidth/2,e=s.offsetY-i.baseTop-i.mirrorHeight/2),i.overSize(o,e)}),$(this.smallBoxId).mouseout(function(){})},removeBig:function(){$(this.smallBoxId).remove(this.mirrorDom),this.bigBoxDom.removeChild(this.bigImgDom),$(this.smallBoxId).remove(this.bigBoxDom),this.hasBig=!1},createBig:function(i){var t=i.offsetX-this.baseLeft-this.mirrorWidth/2,o=i.offsetY-this.baseTop-this.mirrorHeight/2,e="<div style='position:absolute;left:"+t+"px;top:"+o+"px;width:"+this.mirrorWidth+"px;height:"+this.mirrorHeight+"px;border:1px solid black;' ></div>",s=this;this.mirrorDom=$(e)[0],$(this.smallBoxId).append(this.mirrorDom),this.mirrorDom.onmouseout=function(i){var t=i||window.event;console.log("out"),s.hasBig&&(console.log("remove"),s.removeBig()),t.stopPropagation()},this.bigBoxDom=document.createElement("div");var r,h,m=this.mirrorWidth*this.multiple,l=this.mirrorHeight*this.multiple;switch(this.position){case"上":r=0,h=-1*l;break;case"右":r=this.baseWidth,h=0;break;case"下":r=0,h=this.baseHeight;break;case"左":r=-1*m,h=0}this.bigBoxDom.style.cssText="position:absolute;left:"+r+"px;top:"+h+"px;width:"+m+"px;height:"+l+"px;overflow:hidden;",$(this.smallBoxId).append(this.bigBoxDom),this.bigImgDom=document.createElement("img"),this.bigImgDom.src=this.imgPath;var a=this.baseWidth*this.multiple,g=this.baseHeight*this.multiple;this.bigImgDom.style.cssText="position:absolute;width:"+a+"px;height:"+g+"px;",this.bigBoxDom.appendChild(this.bigImgDom),this.overSize(t,o)},overSize:function(i,t){i<=-1?i=-1:i>=this.baseWidth-this.mirrorWidth-1&&(i=this.baseWidth-this.mirrorWidth-1),t<=-1?t=-1:t>=this.baseHeight-this.mirrorHeight-1&&(t=this.baseHeight-this.mirrorHeight-1),this.mirrorDom.style.left=i+"px",this.mirrorDom.style.top=t+"px",this.bigImgDom.style.left=-1*this.multiple*i+"px",this.bigImgDom.style.top=-1*this.multiple*t+"px"}};new t(i)}})});